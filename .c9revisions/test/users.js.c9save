{"ts":1362203982279,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"var request = require('supertest');\nvar http = require(\"http\");\nvar Step = require(\"step\");\nvar server = null;\n\n\nvar database = require(\"../database\");\nvar appInit  = require(\"../app\");\n\ndescribe(\"API\", function() {\n\tbefore(function(done) {\n        \tStep(function(){\n        \t\tdatabase(this);\n\t\t\t},function(err,db){\n\t\t\t\tappInit(db,this);\n\t\t\t},function(err,app){ \n\t\t\t\tserver = http.createServer(app);\n\t\t\t\tserver.listen(app.get('port'), function(err) {\n\t\t\t    \tconsole.log(\"Express server listening on port \" + app.get('port'));\n\t\t\t    \trequest = request(server);\n\t\t\t    \tdone();\n\t\t\t    });\n\t\t\t});\n\t\t});\n\t\t\n\tdescribe(\"USER API\", function() {\n        describe(\"GET /users/:id([0-9]+).json\",function(){\n\t\t\tit(\"should show user with valid id\", function(done) {\n\t    \t    request.get(\"/users/10.json\")\n\t        \t\t   .expect(200, done);\n\t        });\n\t        it(\"should show error with invalid id\", function(done) {\n\t    \t    request.get(\"/users/15124512.json\")\n\t        \t\t   .expect(500, done);\n\t        });\n\t\t});\n\t\t\n\t\tdescribe(\"GET /users.json\",function(){\n\t        it(\"should show all users\", function(done) {\n\t\t        request.get(\"/users.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t    \n\t    describe(\"GET /users/:id([0-9]+)/papers/participating.json\",function(){\n\t    \tit(\"should show all currently participating papers\", function(done) {\n\t\t        request.get(\"/users/10/papers/participating.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t    \n\t    describe(\"GET /users/:id([0-9]+)/friends.json\",function(){\n\t        it(\"should show all user friends for valid \", function(done) {\n\t\t        request.get(\"/users/10/friends.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t});\n\t\n\t\n\t\n\tdescribe(\"PAPER API\",function(){\n\t\tdescribe(\"GET /papers/:id([0-9]+).json\",function(){\n\t\t\tit(\"should show paper with valid id and auth\", function(done) {\n\t    \t    request.get(\"/papers/117.json?user=10\")\n\t        \t\t   .expect(200, done);\n\t        });\n\t        it(\"should show error with invalid id\", function(done) {\n\t    \t    request.get(\"/papers/15124512.json\")\n\t        \t\t   .expect(500, done);\n\t        });\n\t        it(\"should show error with invalid user id\", function(done) {\n\t    \t    request.get(\"/papers/117.json?user=51521\")\n\t        \t\t   .expect(500, done);\n\t        });\n\t\t});\n\t});\n\t\n});\n"]],"start1":0,"start2":0,"length1":0,"length2":2332}]],"length":2332}
{"contributors":[],"silentsave":false,"ts":1362204000287,"patch":[[{"diffs":[[0,"t(\"/"],[-1,"users.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t    \n\t    describe(\"GET /users/:id([0-9]+)/papers/participating.json\",function(){\n\t    \tit(\"should show all currently participating papers\", function(done) {\n\t\t        request.get(\"/users/10/papers/participating.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t    \n\t    describe(\"GET /users/:id([0-9]+)/friends.json\",function(){\n\t        it(\"should show all user friends for valid \", function(done) {\n\t\t        request.get(\"/users/10/friends.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t});\n\t\n\t\n\t\n\tdescribe(\"PAPER API\",function(){\n\t\tdescribe(\"GET /papers/:id([0-9]+).json\",function(){\n\t\t\tit(\"should show paper with valid id and auth\", function(done) {\n\t    \t    request.get(\"/papers/117.json?user=10\")\n\t        \t\t   .expect(200, done);\n\t        });\n\t        it(\"should show error with invalid id\", function(done) {\n\t    \t    request.get(\"/papers/15124512.json\")\n\t        \t\t   .expect(500, done);\n\t        });\n\t        it(\"should show error with invalid user id\", function(done) {\n\t    \t    request.get(\"/papers/117.json?user=51521\")\n\t        \t\t   .expect(500, done);\n\t        });\n\t\t});\n\t});"],[1,"api/users.json\")\n\t\t        \t   .expect(200, done);\n\t        });\n\t    });\n\t});\n\t\n\t"],[0,"\n\t\n}"]],"start1":1126,"start2":1126,"length1":1203,"length2":89}]],"length":1218,"saved":false}
{"ts":1362204004249,"patch":[[{"diffs":[[0,"appInit "],[-1," "],[0,"= requir"]],"start1":156,"start2":156,"length1":17,"length2":16},{"diffs":[[0,"/app\");\n"],[1,""],[0,"\ndescrib"]],"start1":177,"start2":177,"length1":16,"length2":16},{"diffs":[[0,"ion() {\n"],[-1,"\t"],[1,"    "],[0,"before(f"]],"start1":207,"start2":207,"length1":17,"length2":20},{"diffs":[[0,"        "],[-1,"\t"],[0,"Step(fun"]],"start1":243,"start2":243,"length1":17,"length2":16},{"diffs":[[0,"nction()"],[1," "],[0,"{\n      "]],"start1":258,"start2":258,"length1":16,"length2":17},{"diffs":[[0,"        "],[1,"    "],[-1,"\t\t"],[0,"database"]],"start1":269,"start2":269,"length1":18,"length2":20},{"diffs":[[0,"base(this);\n"],[-1,"\t\t\t"],[1,"        "],[0,"},"],[1," "],[0,"function(err"]],"start1":285,"start2":285,"length1":29,"length2":35},{"diffs":[[0,"err,"],[1," "],[0,"db)"],[1," "],[0,"{\n"],[-1,"\t\t\t\t"],[1,"            "],[0,"appI"]],"start1":317,"start2":317,"length1":17,"length2":27},{"diffs":[[0,"(db,"],[1," "],[0,"this);\n"],[-1,"\t\t\t"],[1,"        "],[0,"},"],[1," "],[0,"func"]],"start1":347,"start2":347,"length1":20,"length2":27},{"diffs":[[0,"err,"],[1," "],[0,"app)"],[-1,"{ \n\t\t\t\t"],[1," {\n            "],[0,"serv"]],"start1":379,"start2":379,"length1":19,"length2":28},{"diffs":[[0,"p);\n"],[-1,"\t\t\t\t"],[1,"            "],[0,"serv"]],"start1":432,"start2":432,"length1":12,"length2":20},{"diffs":[[0,"(err) {\n"],[-1,"\t\t\t"],[1,"            "],[0,"    "],[-1,"\t"],[0,"console."]],"start1":487,"start2":487,"length1":24,"length2":32},{"diffs":[[0,"ort'));\n"],[-1,"\t\t\t    \t"],[1,"                "],[0,"request "]],"start1":571,"start2":571,"length1":24,"length2":32},{"diffs":[[0,"r);\n"],[-1,"\t\t\t"],[1,"           "],[0,"    "],[-1,"\t"],[1," "],[0,"done();\n"],[-1,"\t\t\t    });\n\t\t\t});\n\t\t});\n\t\t\n\t"],[1,"            });\n        });\n    });\n\n    "],[0,"desc"]],"start1":618,"start2":618,"length1":52,"length2":73},{"diffs":[[0,"-9]+).json\","],[1," "],[0,"function(){\n"]],"start1":756,"start2":756,"length1":24,"length2":25},{"diffs":[[0,"on()"],[1," "],[0,"{\n"],[-1,"\t\t\t"],[1,"            "],[0,"it(\""]],"start1":775,"start2":775,"length1":13,"length2":23},{"diffs":[[0,"unction(done) {\n"],[-1,"\t"],[1,"   "],[0,"    "],[-1,"\t"],[1,"     "],[0,"    request.get("]],"start1":832,"start2":832,"length1":38,"length2":44},{"diffs":[[0,"rs/10.json\")"],[-1,"\n\t        \t\t   "],[0,".expect(200,"]],"start1":881,"start2":881,"length1":39,"length2":24},{"diffs":[[0,"ect(200, done);\n"],[-1,"\t"],[1,"    "],[0,"        });\n\t   "]],"start1":897,"start2":897,"length1":33,"length2":36},{"diffs":[[0,"        });\n"],[-1,"\t"],[1,"    "],[0,"        it(\""]],"start1":917,"start2":917,"length1":25,"length2":28},{"diffs":[[0,") {\n"],[-1,"\t    \t"],[1,"            "],[0,"    "]],"start1":994,"start2":994,"length1":14,"length2":20},{"diffs":[[0,"on\")"],[-1,"\n\t        \t\t   "],[0,".exp"]],"start1":1045,"start2":1045,"length1":23,"length2":8},{"diffs":[[0,"ect(500, done);\n"],[-1,"\t"],[1,"    "],[0,"        });\n\t\t})"]],"start1":1053,"start2":1053,"length1":33,"length2":36},{"diffs":[[0,"});\n"],[-1,"\t\t});\n\t\t\n\t\t"],[1,"        });\n\n        "],[0,"desc"]],"start1":1081,"start2":1081,"length1":19,"length2":29},{"diffs":[[0,"s.json\","],[1," "],[0,"function"]],"start1":1125,"start2":1125,"length1":16,"length2":17},{"diffs":[[0,"nction()"],[1," "],[0,"{\n"],[-1,"\t"],[1,"    "],[0,"        "]],"start1":1136,"start2":1136,"length1":19,"length2":23},{"diffs":[[0,"done) {\n"],[-1,"\t\t"],[1,"  "],[0,"        "],[1,"      "],[0,"request."]],"start1":1196,"start2":1196,"length1":26,"length2":32},{"diffs":[[0,"on\")"],[-1,"\n\t\t        \t   "],[0,".exp"]],"start1":1246,"start2":1246,"length1":23,"length2":8},{"diffs":[[0," done);\n"],[-1,"\t"],[1,"    "],[0,"        "]],"start1":1262,"start2":1262,"length1":17,"length2":20},{"diffs":[[0,"});\n"],[-1,"\t"],[1,"    "],[0,"    });\n"],[-1,"\t});\n\t\n\t\n\t"],[1,"    });\n"],[0,"\n});"]],"start1":1282,"start2":1282,"length1":27,"length2":28}]],"length":1311,"saved":false}
{"ts":1362204010405,"patch":[[{"diffs":[[0,"quest.get(\"/"],[1,"api/"],[0,"users/10.jso"]],"start1":866,"start2":866,"length1":24,"length2":28},{"diffs":[[0,"t.get(\"/"],[1,"api/"],[0,"users/15"]],"start1":1024,"start2":1024,"length1":16,"length2":20}]],"length":1319,"saved":false}
{"contributors":[],"silentsave":false,"ts":1362227623196,"patch":[[{"diffs":[[0," null;\n\n"],[1,"/*"],[0,"\nvar dat"]],"start1":104,"start2":104,"length1":16,"length2":18},{"diffs":[[0,"   });\n\n});\n"],[1,"*/"]],"start1":1309,"start2":1309,"length1":12,"length2":14}]],"length":1323,"saved":false}
